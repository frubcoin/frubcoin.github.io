<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.4/howler.min.js"></script>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" name=viewport>
    <title>frub</title>
    <style>
        body,html{background:#000!important;visibility:hidden}
    </style>
    <link href=arrowhead-rounded-outline.svg?v=1 rel=preload as=image type=image/png>
    <link href=hand-pointer.svg?v=1 rel=preload as=image type=image/png>
    <link href="https://fonts.googleapis.com/css2?family=Special+Gothic+Expanded+One&display=swap" rel=stylesheet>
    <meta content=Frub.bio name=description>
    <meta content="frub, frubcoin" name=keywords>
    <meta content=frub name=author>
    <link href=https://fonts.googleapis.com rel=preconnect>
    <link href=https://fonts.gstatic.com rel=preconnect crossorigin>
    <style>
        @import url(https://fonts.googleapis.com/css2?family=Encode+Sans+Expanded:wght@100;200;300;400;500;600;700;800;900&display=swap);
    </style>
    <style>
      /* Prevent iOS Safari from zooming inputs on focus */
      html { -webkit-text-size-adjust: 100%; }
      input, select, textarea, button { font-size: 16px; }
    </style>
    <style>

        .vignette{position:relative}.vignette:after{border-radius:.625rem;-moz-box-shadow:0 0 11.25rem #696969;-webkit-box-shadow:0 0 11.25rem #696969;box-shadow:0 0 11.25rem #696969;background-color:rgb(37,37,37,.7);position:absolute;top:0;left:0;width:100%;height:100%;z-index:-1;content:"";pointer-events:none;opacity:0}h4{font-weight:300;margin-top:-1rem;font-size:.69rem;text-align:center}:root{--bg-color:rgba(30, 30, 30, 0.377);--text-color:#FFFFFF;--accent-color:#FFFFFF;--card-bg:rgba(255, 255, 255, 0.05); --hover-color:rgba(255, 145, 0, 0.247)}*{letter-spacing:.11rem;cursor:inherit}body{cursor:url(arrowhead-rounded-outline.svg) 9 9,auto;font-family:"Special Gothic Expanded One",sans-serif;font-weight:700;font-style:normal;color:var(--text-color);margin:0;padding:0;display:flex;flex-direction:column;align-items:center;min-height:100vh;position:relative}@media (max-width:768px){body{overflow:auto}.vignette::after{display:none}}#vignette-overlay{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:3;background:radial-gradient(circle,transparent 50%,rgba(0,0,0,.8) 150%)}#visualizer-container{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1}.content-wrapper{position:relative;z-index:2;background-color:var(--bg-color);width:100%;min-height:100vh;display:flex;justify-content:center;align-items:center;opacity:0;transition:opacity .5s ease-in}.container{max-width:37.5rem;width:100%;padding:1.25rem;box-sizing:border-box;margin:0 auto}header{text-align:center;margin-bottom:30px}.avatar{width:7.5rem;height:7.5rem;border-radius:50%;object-fit:cover;background-color:#d9d9d9;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 8 8'%3E%3Cg fill='%23ffffff' fill-opacity='0.4'%3E%3Cpath fill-rule='evenodd' d='M0 0h4v4H0V0zm4 4h4v4H4V4z'/%3E%3C/g%3E%3C/svg%3E");border: 1px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(23px);
            -webkit-backdrop-filter: blur(23px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.37), inset 0 -1px 0 rgba(255, 255, 255, 0.1), inset 0 0 14px 7px rgba(148, 148, 148, 0.247);
            outline: none;
        }h1{font-size:1.5rem;margin:.625rem 0;color:var(--accent-color);font-weight:800}h2{font-weight:800}p{font-size:1rem;opacity:.8;margin-bottom:1.25rem}.social-text{font-weight:400}.links{gap: 0.5rem;display:flex;flex-direction:column;z-index:9999}.portfolio{display:flex;flex-direction:column;gap:20px;z-index:9999;max-height:0;overflow:hidden;transition:max-height .6s cubic-bezier(.4,0,.2,1);opacity:0;visibility:hidden}.portfolio.expanded{max-height:2000px;opacity:1;visibility:visible;transition:max-height .6s cubic-bezier(.4,0,.2,1),opacity .3s ease,visibility 0s}.portfolio h2,.portfolio h4,.portfolio-item{opacity:0;transform:translateY(20px);will-change:transform,opacity;transition:none!important}.portfolio-item.animate{transition:opacity .5s ease,transform .5s ease,background-color .3s ease!important;opacity:1;transform:translateY(0)}.portfolio-item:hover{background-color:var(--hover-color)}.embed-close,.embed-open-new-tab,.expand-button,.link-item,.portfolio-item, a, button, input[type="button"]{cursor:url(hand-pointer.svg) 9 9,pointer;background-color:rgba(255, 255, 255, 0.02);border-radius:20px;padding:1rem;text-decoration:none;color:var(--text-color);transition:background-color .3s ease;display:flex;align-items:center;gap:1rem;backdrop-filter: blur(23px);-webkit-backdrop-filter: blur(23px);border: 1px solid rgba(255, 255, 255, 0.3);box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.37), inset 0 -1px 0 rgba(255, 255, 255, 0.1), inset 0 0 14px 7px rgba(148, 148, 148, 0.247);}.expand-button:hover,.link-item:hover,.portfolio-item:hover{background-color:var(--hover-color)}.arrow,.link-icon,.portfolio-icon{width:1.5rem;height:1.5rem;display:flex;align-items:center;justify-content:center}.arrow img{width:1.5rem;height:1.5rem;filter:invert(1);transition:transform .3s ease;user-select: none;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none}.portfolio-item img{width:2rem;height:2rem;object-fit:contain;border-radius:.3125rem;margin-right:1rem;background-color:transparent;padding:0}.portfolio-info h3{margin:0;font-size:1rem;;letter-spacing:.11rem}.portfolio-info p{margin:.3125rem 0 0;font-size:.875rem;opacity:.7;;letter-spacing:.11rem}.embed-window{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:80%;height:80%;background-color:var(--bg-color);border-radius:20px;box-shadow:0 0 1.25rem rgba(0,0,0,.5);display:none;flex-direction:column;z-index:10000}.embed-header{display:flex;justify-content:space-between;align-items:center;padding:.625rem;background-color:var(--card-bg);border-top-left-radius:20px;border-top-right-radius:20px;cursor:url(move.svg) 9 9, move}.embed-title{font-size:1.125rem;font-weight:700}.embed-controls{display:flex;align-items:center}.embed-open-new-tab{background-color:rgba(255, 255, 255, 0.02);color:#fff;border:none;padding:.3125rem .625rem;border-radius:20px;cursor:url(hand-pointer.svg) 9 9,pointer;font-family:"Special Gothic Expanded One",sans-serif;font-size:.875rem;;letter-spacing:.11rem;margin-right:.625rem;transition:background-color .3s ease;backdrop-filter: blur(23px);-webkit-backdrop-filter: blur(23px);border: 1px solid rgba(255, 255, 255, 0.3);box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.37), inset 0 -1px 0 rgba(255, 255, 255, 0.1), inset 0 0 14px 7px rgba(148, 148, 148, 0.247);}.embed-open-new-tab:hover{background-color:var(--hover-color)}.embed-close{background:rgba(255, 255, 255, 0.02);border:1px solid rgba(255, 255, 255, 0.3);border-radius:50%;backdrop-filter: blur(23px);-webkit-backdrop-filter: blur(23px);box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.37), inset 0 -1px 0 rgba(255, 255, 255, 0.1), inset 0 0 14px 7px rgba(148, 148, 148, 0.247);color:var(--text-color);font-size:1.5rem;cursor:url(hand-pointer.svg) 9 9,pointer;width:40px;height:40px;display:flex;align-items:center;justify-content:center;padding:0;}.embed-close:hover{background-color:var(--hover-color)}.embed-content{flex-grow:1;border:none;border-bottom-left-radius:20px;border-bottom-right-radius:20px;cursor:url(hand-pointer.svg) 9 9,pointer}.portfolio-title{font-size:1.375rem;font-weight:600;text-align:center;margin-bottom:1.25rem;color:var(--accent-color);text-transform:uppercase;letter-spacing:.125rem}#film-grain-overlay{display:none}.social-text{font-family:"Special Gothic Expanded One",sans-serif;font-size:1rem;}.expand-button{width:100%;margin-bottom:.5rem;font-family:"Special Gothic Expanded One",sans-serif;font-size:1rem;;position:relative;overflow:hidden;background-color:rgba(255, 255, 255, 0.02);border-radius:20px;padding:1rem;text-decoration:none;color:var(--text-color);text-align:left;backdrop-filter: blur(23px);-webkit-backdrop-filter: blur(23px);border: 1px solid rgba(255, 255, 255, 0.3);box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.37), inset 0 -1px 0 rgba(255, 255, 255, 0.1), inset 0 0 14px 7px rgba(148, 148, 148, 0.247);}.expand-button .button-text{display:inline-block;opacity:1;transition:opacity .5s ease;margin-left:-4px}.expand-button .arrow{display:inline-flex;align-items:center;vertical-align:middle;width:1.5rem;margin-right:4px}.expand-button .arrow img{width:1.5rem;height:1.5rem}.expand-button.expanded .arrow img{transform:rotate(180deg)}h5{font-size:1rem!important}
    </style>
    <div id=fadein></div>
    <style>
      
        @keyframes fadeinall{0%{opacity:1}97%{opacity:0}98%{opacity:0;-webkit-transform:translateY(0);transform:translateY(0)}100%{opacity:0;-webkit-transform:translateY(-100%);transform:translateY(-100%);z-index:-1}}#fadein{opacity:1;position:fixed;top:0;left:0;width:100%;height:100%;-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0);background-color:#000;z-index:9999;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation:fadeinall 1s normal both;animation:fadeinall 1s normal both;-webkit-animation-delay:.3s;animation-delay:.3s}.content-wrapper{opacity:0;transition:opacity .5s ease-in}.content-wrapper.visible{opacity:1}
    </style>
    <script>
        // Remove initial black background and show content
                    document.addEventListener('DOMContentLoaded', function() {
                      document.body.style.visibility = 'visible';
                      document.body.style.background = '';
                      
                      // Fade in content
                      setTimeout(function() {
                        document.querySelector('.content-wrapper').classList.add('visible');
                      }, 100);
                      
                      // Remove fade overlay
                      setTimeout(function() {
                        const fadeElement = document.getElementById("fadein");
                        if (fadeElement) {
                          fadeElement.remove();
                        }
                      }, 1300);
                    });
    </script>
    <div id=vignette-overlay></div>
    <div id=visualizer-container></div>
    <div class=content-wrapper>
        <div class="container vignette blurred-container">
            <header><img alt="Frub's profile picture" src="1aa31df9d98dfeb8702091f8c04251e76b75643e33a012875e5851fefe692f99i0.png?v=1" height=120 width=120 class=avatar>
                <h1>frub</h1>
                <h5 class="subtitle">web3? more like web me.</h5></header>


            <section class=links>

                <a class=link-item href=https://x.com/frubcoin rel="noopener noreferrer" target=_blank>
                    <svg class=link-icon fill=currentColor viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg>
                        <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"></path>
                    </svg> <span class=social-text>Twitter</span></a>

                    
                <button id="show-prices-btn" class="link-item">
                    <svg class="link-icon" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                        <path d="M8 12h8M12 8v8" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                    </svg> <span class="social-text">Crypto Prices</span></button>

                <!-- Expandable prices section inserted here -->
                <section id="prices-expand-section" style="max-height:0;overflow:hidden;transition:max-height 0.7s cubic-bezier(0.4,0,0.2,1),opacity 0.5s;opacity:0;width:100%;">
                    <div id="prices-list"></div>



                    <div id="last-update" style="display:block;text-align:center;font-size:0.8em;color:#888;margin-top:5px;">
                      Last update: 
                      <span id="last-update-hours"></span>:<span id="last-update-minutes"></span>:<span id="last-update-seconds"></span> <span id="last-update-ampm"></span>

                    </div>
                    
                    
                </section>

                <button id="show-contact-btn" class="link-item">
                    <svg class="link-icon" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8l8 5 8-5v10zm-8-7L4 6h16l-8 5z" />
                    </svg> <span class="social-text">Contact Me</span></button>

                    <section id="contact-expand-section" class="contact-form">
                      <form id="contactForm">
                        <div class="form-group">
                          <label for="name">Name</label>
                          <input type="text" id="name" name="name" required>
                        </div>
                    
                        <div class="form-group">
                          <label for="email">Email</label>
                          <input type="email" id="email" name="email" required>
                        </div>
                    
                        <div class="form-group" style="margin-bottom: 20px;">
                          <label for="message">Message</label>
                          <textarea id="message" name="message" required rows="4"></textarea>
                        </div>

                        <!-- Honeypot field - hidden from users -->
                        <div style="position: absolute; left: -9999px; opacity: 0; pointer-events: none;">
                          <input type="text" name="website" tabindex="-1" autocomplete="off">
                        </div>
                    
                        <!-- hCaptcha -->
                        <div class="form-group" style="text-align: center; margin-bottom: 20px;">
                          <div class="h-captcha" data-sitekey="98809664-253c-40a8-9cb4-79c811ea2e14" data-callback="onCaptchaSuccess"></div>
                        </div>
                    
                        <button type="submit" id="submit-btn">Send Message</button>
                      </form>
                    
                      <p id="formStatus"></p>
                    </section>
                    

                <script>
                    document.addEventListener('DOMContentLoaded', function() {
                    const contactBtn = document.getElementById('show-contact-btn');
                    const contact = document.getElementById('contact-expand-section');
                    const items = contact.querySelectorAll('h2, form');
                    
                    contactBtn.addEventListener('click', function() {
                      if (!contact.classList.contains('expanded')) {
                        // Opening
                        items.forEach(item => {
                          item.style.transform = 'translateY(20px)';
                          item.classList.remove('animate');
                        });
                    
                        contact.classList.add('expanded');
                    
                        setTimeout(() => {
                          items.forEach((item, index) => {
                            setTimeout(() => item.classList.add('animate'), 100 * index);
                          });
                        }, 50);
                    
                      } else {
                        // Closing
                        const itemsArray = Array.from(items).reverse();
                        itemsArray.forEach((item, index) => {
                          setTimeout(() => {
                            item.classList.remove('animate');
                            item.style.transform = 'translateY(20px)';
                          }, 100 * index);
                        });
                    
                        // Wait for animations, then shrink
                        setTimeout(() => {
                          contact.classList.remove('expanded');
                        }, (itemsArray.length * 100) + 300); // extra buffer for smoothness
                      }
                    });
                    });
                </script>

<script>
  // Callback function for hCaptcha success
  function onCaptchaSuccess(token) {
    const submitBtn = document.getElementById('submit-btn');
    const contact = document.getElementById('contact-expand-section');
    const items = contact.querySelectorAll('h2, form');
    
    // Expand the contact container if not already expanded
    if (!contact.classList.contains('expanded')) {
      // Opening
      items.forEach(item => {
        item.style.transform = 'translateY(20px)';
        item.classList.remove('animate');
      });

      contact.classList.add('expanded');

      setTimeout(() => {
        items.forEach((item, index) => {
          setTimeout(() => {
            item.classList.add('animate');
          }, index * 100);
        });
      }, 50);
    }
    
    // Trigger button expansion animation
    setTimeout(() => {
      submitBtn.classList.add('visible');
    }, 50);
  }

  document.addEventListener('DOMContentLoaded', function() {
    emailjs.init("zOPTHFeD7H_tvrlUE");
  
    const contactForm = document.getElementById('contactForm');
    const formStatus = document.getElementById('formStatus');
  
    contactForm.addEventListener('submit', function(event) {
      event.preventDefault();
  
      // Check honeypot field
      const honeypot = document.querySelector('input[name="website"]');
      if (honeypot && honeypot.value !== '') {
        // Bot detected - silently fail
        formStatus.textContent = 'Message sent successfully!';
        formStatus.classList.add('visible');
        setTimeout(() => formStatus.classList.remove('visible'), 3000);
        return;
      }

      // Get hCaptcha response token
      const hcaptchaResponse = hcaptcha.getResponse();
      
      if (!hcaptchaResponse) {
        alert('Please complete the captcha before sending your message.');
        return;
      }
  
      // Hide send button first
      const submitBtn = document.getElementById('submit-btn');
      submitBtn.classList.remove('visible');
      
      // Then show sending status
      setTimeout(() => {
        formStatus.textContent = 'Sending...';
        formStatus.classList.add('visible');
      }, 50);
  
      emailjs.sendForm('service_ek7hewa', 'template_li5mv5e', this)
        .then(function() {
          formStatus.textContent = 'Message sent successfully!';
          contactForm.reset();
          
          // Reset hCaptcha and hide button again (matching other sections)
          hcaptcha.reset();
          const submitBtn = document.getElementById('submit-btn');
          
          // Remove visible class to hide button
          submitBtn.classList.remove('visible');

          setTimeout(() => formStatus.classList.remove('visible'), 3000);
        }, function(error) {
          formStatus.textContent = 'Failed to send message. Please try again.';
          console.error('EmailJS error:', error);
          setTimeout(() => formStatus.classList.remove('visible'), 3000);
        });
    });
  });
  </script>
  
  
  


                <style>


                    /* (removed empty mobile rule for #show-prices-btn) */
                    #prices-expand-section .price-container:hover {
                  background-color: var(--hover-color);
                  opacity: 1;
                  transition: all 0.3s ease;
                }
                #prices-expand-section {
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  width: 100%;
  display: none; /* collapse from flow when hidden */
  transition: max-height 0.7s cubic-bezier(0.4,0,0.2,1), opacity 0.5s;
}

                
                #prices-expand-section .price-container {
                      display: flex;
                      cursor: url(hand-pointer.svg) 9 9, pointer;
                      flex-wrap: nowrap;
                      justify-content: space-between;
                      align-items: center;
                      margin: 0 0 0.625rem;
                      padding: .7rem;
                      border-radius: 20px;
                      background: rgba(255,255,255,0.05);
                      -webkit-backdrop-filter: blur(23px);
                      backdrop-filter: blur(23px);
                      border: 1px solid rgba(255,255,255,0.3);
                      box-shadow: 0 8px 32px rgba(0,0,0,0.1),inset 0 1px 0 rgba(255,255,255,0.37),inset 0 -1px 0 rgba(255,255,255,0.1),inset 0 0 14px 7px rgba(148,148,148,0.247);
                      position: relative;
                      overflow: hidden;
                      min-width: 0;
                      
                      transition: opacity 0.5s cubic-bezier(.4,0,.2,1), transform 0.5s cubic-bezier(.4,0,.2,1), background-color 0.3s ease;
                      opacity: 0;
                      transform: translateY(20px);
                    }
                    #prices-expand-section .price-container.animate {
                      opacity: 1;
                      transform: translateY(0);
                      transition: opacity 0.5s cubic-bezier(.4,0,.2,1), transform 0.5s cubic-bezier(.4,0,.2,1), background-color 0.3s ease;
                    }
                    #prices-expand-section .price-container.hide {
                      opacity: 0;
                      transform: translateY(20px);
                      transition: opacity 0.5s cubic-bezier(.4,0,.2,1), transform 0.5s cubic-bezier(.4,0,.2,1), background-color 0.3s ease;
                    }
                    #prices-expand-section .price-container::before { content: ""; position: absolute; inset: 0; pointer-events: none; z-index: 5; opacity: 0.12; background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><filter id="noiseFilter"><feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="4" stitchTiles="stitch"/></filter><rect width="100" height="100" filter="url(%23noiseFilter)"/></svg>'); background-repeat: repeat; background-size: 100px 100px; mix-blend-mode: overlay; border-radius: 20px; }
                    #prices-expand-section .price-container h1 { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; flex: 1 1 0%; min-width: 0; max-width: 100%; font-size: 0.98em; margin: 0; }
                    #prices-expand-section .price-container .price-ticker { margin-left: 0.625rem; font-size: 0.98em; flex: 0 1 auto; min-width: 0; white-space: nowrap; overflow: visible; text-overflow: unset; max-width: 100%; }
                    #prices-expand-section .up { color: #4CAF50; }
                    #prices-expand-section .down { color: #FF5722; }
                    #prices-expand-section .spinner { border: 4px solid rgba(255,255,255,0.3); border-radius: 50%; border-top: 4px solid #fff; width: 16px; height: 16px; -webkit-animation: spin 1s linear infinite; animation: spin 1s linear infinite; margin-right: 10px; }
                    @-webkit-keyframes spin { 0% { -webkit-transform: rotate(0deg); } 100% { -webkit-transform: rotate(360deg); } }
                    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
                    img[id$="-icon"] { opacity: 0; transition: opacity 0.3s ease; width: 30px; height: 30px; margin-right: 5px; }
                    @media (max-width: 600px) { #prices-expand-section .price-container { padding: 0.5rem; } }
                    #prices-expand-section.expanded {
                      margin-bottom: 0;
                      margin-top: 0;
                    }

                    
                </style>
                <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-countto/1.2.0/jquery.countTo.min.js"></script>
                <script src="crypto-prices.js"></script>



    <script src=https://unpkg.com/butterchurn@2.6.7/lib/butterchurn.min.js></script>
    <script src=https://unpkg.com/butterchurn-presets@2.4.7/lib/butterchurnPresets.min.js></script>
    <script>
        let currentEmbedUrl = '';
        
                function togglePortfolio() {
                  const portfolio = document.querySelector('.portfolio');
                  const button = document.querySelector('.expand-button');
                  const buttonText = button.querySelector('.button-text');
                  const items = document.querySelectorAll('.portfolio-item, .portfolio h2, .portfolio h4');
                  
                  if (!portfolio.classList.contains('expanded')) {
                    // Opening the section
                    buttonText.classList.remove('closing');
                    items.forEach(item => {
                      item.style.opacity = '0';
                      item.style.transform = 'translateY(20px)';
                      item.classList.remove('animate');
                    });
                    
                    portfolio.classList.add('expanded');
                    button.classList.add('expanded');
                    
                    // Animate text change - fade only
                    buttonText.style.opacity = '0';
                    setTimeout(() => {
                      buttonText.textContent = 'Hide my web creations';
                      buttonText.style.opacity = '1';
                    }, 200);
                    
                    // Start animations after expansion begins
                    setTimeout(() => {
                      items.forEach((item, index) => {
                        setTimeout(() => {
                          item.classList.add('animate');
                          item.style.opacity = '1';
                          item.style.transform = 'translateY(0)';
                        }, 100 * index);
                      });
                    }, 50);
                  } else {
                    // Closing the section
                    button.classList.remove('expanded');
                    buttonText.classList.add('closing');
                    
                    // Animate text change - fade only
                    buttonText.style.opacity = '0';
                    setTimeout(() => {
                      buttonText.textContent = 'My web creations';
                      buttonText.style.opacity = '1';
                    }, 600);
                    
                    // Reverse animation for items
                    const itemsArray = Array.from(items).reverse();
                    itemsArray.forEach((item, index) => {
                      setTimeout(() => {
                        item.style.opacity = '0';
                        item.style.transform = 'translateY(20px)';
                      }, 100 * index);
                    });
                    
                    // Wait for all items to animate out before closing the section
                    setTimeout(() => {
                      portfolio.classList.remove('expanded');
                      items.forEach(item => {
                        item.classList.remove('animate');
                      });
                    }, (itemsArray.length * 100) + 50);
                  }
                }
        
                window.onload = () => {
                  // Initialize portfolio items to be hidden
                  const items = document.querySelectorAll('.portfolio-item, .portfolio h2, .portfolio h4');
                  items.forEach(item => {
                    item.style.opacity = '0';
                    item.style.transform = 'translateY(20px)';
                    item.classList.remove('animate');
                  });
        
                  // Initialize Butterchurn visualizer
                  const canvas = document.createElement('canvas');
                  canvas.width = window.innerWidth;
                  canvas.height = window.innerHeight;
                  document.getElementById('visualizer-container').appendChild(canvas);
        
                  const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                  const visualizer = butterchurn.default.createVisualizer(audioContext, canvas, {
                    width: window.innerWidth,
                    height: window.innerHeight
                  });
        
                  // Get all presets
                  const presets = butterchurnPresets.getPresets();
                  const presetKeys = Object.keys(presets);
                  let currentPresetIndex = 0;
        
                  // Function to load the next preset
                  function loadNextPreset() {
                    currentPresetIndex = (currentPresetIndex + 1) % presetKeys.length;
                    const preset = presets[presetKeys[currentPresetIndex]];
                    console.log('Current preset:', presetKeys[currentPresetIndex]); // Log the current preset name
                    visualizer.loadPreset(preset, 2.7); // 2.7 seconds transition
                  }
        
                  // Load initial preset
                  loadNextPreset();
        
                  // Prepare analyser for later connection to the music instance
                  const analyser = audioContext.createAnalyser();
                  analyser.fftSize = 512;

                  // Expose for later hookup from the mute button logic
                  window.__frubAudio = { audioContext, analyser, visualizer };
        
                  // Start the visualizer rendering
                  visualizer.setRendererSize(window.innerWidth, window.innerHeight);
        
                  function renderFrame() {
                    visualizer.render();
                    requestAnimationFrame(renderFrame);
                  }
        
                  renderFrame();
        
                  // Change preset every 14 seconds
                  setInterval(loadNextPreset, 14000);
        
                  // Handle window resize
                  window.addEventListener('resize', () => {
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                    visualizer.setRendererSize(window.innerWidth, window.innerHeight);
                  });
        
                  // Once the visualizer is loaded, trigger portfolio item animations
                  setTimeout(() => {
                    const items = document.querySelectorAll('.portfolio-item, h4, h2');
                    items.forEach((item, index) => {
                      setTimeout(() => {
                        item.style.transition = 'opacity 0.5s ease, transform 0.5s ease, background-color 0.3s ease';
                        item.style.opacity = '1';
                        item.style.transform = 'translateY(0)';
                      }, 100 * index); // Stagger the animation for each item
                    });
                  }, 500); // Adjust the delay to match when the visualizer is ready
        
                  // Mute button logic is initialized later after the elements exist
                };
        
                // Film grain effect
                const filmGrainOverlay = document.getElementById('film-grain-overlay');
        
                function toggleFilmGrain() {
                  // Function kept empty to prevent any errors
                }
        
                document.addEventListener('F', toggleFilmGrain);
        
                function openEmbedWindow(url, title) {
                  const embedWindow = document.getElementById('embedWindow');
                  const embedTitle = document.getElementById('embedTitle');
                  const embedContent = document.getElementById('embedContent');
        
                  // Check if the screen width is less than or equal to 768px
                  if (window.innerWidth <= 768) {
                    // Open the URL in a new tab instead of opening the embed window
                    window.open(url, '_blank');
                  } else {
                    // For larger screens, open the embed window
                    embedTitle.textContent = title;
                    embedContent.src = url;
                    currentEmbedUrl = url;
                    embedWindow.style.display = 'flex';
                  }
                }
        
                function openInNewTab() {
                  if (currentEmbedUrl) {
                    window.open(currentEmbedUrl, '_blank');
                  }
                }
        
                function closeEmbedWindow() {
                  const embedWindow = document.getElementById('embedWindow');
                  const embedContent = document.getElementById('embedContent');
        
                  embedWindow.style.display = 'none';
                  embedContent.src = '';
                  currentEmbedUrl = '';
                }
        
                function toggleContentView() {
                  const content = document.querySelector('.content-wrapper');
                  const button = document.querySelector('.hide-view-btn');
                  const visualizer = document.getElementById('visualizer-container');
                  const musicControls = document.querySelector('.now-playing');
                  const volumeControls = document.querySelector('.volume-slider-container');
                  const vignetteOverlay = document.getElementById('vignette-overlay');
                  const blurredContainer = document.querySelector('.blurred-container');
                  
                  if (content.classList.contains('hidden')) {
                    // Show content
                    content.classList.remove('hidden');
                    content.style.opacity = '1';
                    button.textContent = 'Hide View';
                    button.classList.remove('hidden');
                    
                    // Show vignette overlay and blurred container
                    if (vignetteOverlay) vignetteOverlay.style.opacity = '1';
                    if (blurredContainer) {
                      blurredContainer.style.opacity = '1';
                      blurredContainer.style.filter = '';
                    }
                    
                    // Fade in all content except the specified elements
                    document.querySelectorAll('*').forEach(el => {
                      if (el !== visualizer && 
                          el !== musicControls && 
                          el !== volumeControls && 
                          el !== button && 
                          !el.closest('.now-playing') &&
                          !el.closest('.volume-slider-container') &&
                          !el.closest('#visualizer-container')) {
                        el.style.transition = 'opacity 0.5s ease';
                        el.style.opacity = '1';
                      }
                    });
                  } else {
                    // Hide content with fade
                    content.style.opacity = '0.3';
                    button.textContent = 'Show View';
                    
                    // Hide vignette overlay and reduce blur
                    if (vignetteOverlay) vignetteOverlay.style.opacity = '0';
                    if (blurredContainer) {
                      blurredContainer.style.opacity = '0.1';
                      blurredContainer.style.filter = 'blur(2px)';
                    }
                    
                    // Fade out all content except the specified elements
                    document.querySelectorAll('*').forEach(el => {
                      if (el !== visualizer && 
                          el !== musicControls && 
                          el !== volumeControls && 
                          el !== button && 
                          !el.closest('.now-playing') &&
                          !el.closest('.volume-slider-container') &&
                          !el.closest('#visualizer-container')) {
                        el.style.transition = 'opacity 0.5s ease';
                        el.style.opacity = '0.1';
                      }
                    });
                  }
                }
    </script>

    <style>
        /* Base styles for all elements */
        body * {
            transition: opacity 0.5s ease;
            opacity: 1;
        }
        
        /* Elements that should never fade */
        #visualizer-container,
        .now-playing,
        .volume-slider-container,
        .hide-view-btn {
            opacity: 1 !important;
            pointer-events: auto !important;
        }
        
        /* Nested elements of non-fading elements */
        .now-playing *,
        .volume-slider-container *,
        .hide-view-btn * {
            opacity: 1 !important;
        }

        .contact-form {
          max-height: 0;
          overflow: hidden;
          opacity: 0;
          transition: max-height 0.7s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.5s ease;
          width: 100%;
        }

        .contact-form.expanded {
          max-height: 2000px;
          opacity: 1;
          opacity: 1;
        }
        
        /* Style for form status messages */
        #formStatus {
          font-size: 0.75rem;
          opacity: 0.8;
          margin-top: 0.5rem;
          text-align: center;
        }
        .contact-form h2,
        .contact-form form {
          opacity: 0;
          transform: translateY(20px);
          will-change: transform, opacity;
          transition: opacity .5s ease, transform .2s ease;
        }
        .contact-form .animate {
          transition: opacity .5s ease, transform .5s ease !important;
          opacity: 1;
          transform: translateY(0);
        }
        
        #submit-btn {
          height: 0;
          font-size: 1rem;
          opacity: 0;
          overflow: hidden;
          margin: 0;
          padding: 0;
          border: none;
          cursor: url(hand-pointer.svg) 9 9, pointer;
          background-color: rgba(255, 255, 255, 0.02);
          border-radius: 20px;
          text-decoration: none;
          color: var(--text-color);
          transition: height 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94), opacity 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94), margin 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94), padding 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94), background-color 0.3s ease;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 1rem;
          backdrop-filter: blur(23px);
          -webkit-backdrop-filter: blur(23px);
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.37), inset 0 -1px 0 rgba(255, 255, 255, 0.1), inset 0 0 14px 7px rgba(148, 148, 148, 0.247);
          background-image:
            url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><filter id="noiseFilter"><feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="4" stitchTiles="stitch"/></filter><rect width="100" height="100" filter="url(%23noiseFilter)"/></svg>'),
            rgba(255,255,255,0.05);
          background-blend-mode: overlay;
          background-repeat: repeat;
          background-size: auto;
          width: 100%;
          font-family: "Special Gothic Expanded One", sans-serif;
          font-weight: normal;
          letter-spacing: 0.11rem;
          pointer-events: none;
        }
        
        #submit-btn.visible {
          height: 60px;
          opacity: 1;
          margin-top: 20px;
          padding: 1rem;
          border: 1px solid rgba(255, 255, 255, 0.3);
          pointer-events: auto;
        }
        
        #submit-btn:hover {
          background-color: var(--hover-color);
        }
          /* Make padding and border included in width */
        * {
          box-sizing: border-box;
        }
        
        .contact-form {
          max-height: 0;

          transition: max-height 0.7s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.5s;
          opacity: 0;
          width: 100%;
          margin-top: 0;
          max-width: 600px;   /* optional, keeps it from being too wide */
          margin: 0 auto;     /* centers the form */
        }
        
        #contactForm {
          border-radius: 20px;
        }
        


        .form-group {

          max-width: 600px;   /* optional, keeps it from being too wide */
          width: 100%;
        }


        
        label {
          display: block;
    font-size: 1rem;
    padding-bottom: 4px;
    padding-top: 8px;
        }
        
        #contactForm
        input,
        textarea {
          width: 100%;
          padding: 0.75rem;
          border-radius: 10px;
          border: 1px solid rgba(255, 255, 255, 0.3);
          background: rgba(255, 255, 255, 0.05);
          color: var(--text-color);
          font-family: inherit;
          letter-spacing: 0.11rem;
        }
        
        /* Remove focus outlines and tap highlight on inputs/buttons */
        #contactForm input:focus,
        #contactForm textarea:focus,
        #contactForm select:focus,
        #contactForm button:focus,
        button:focus {
          outline: none;
          box-shadow: none;
        }
        
        input, textarea, select, button { -webkit-tap-highlight-color: transparent; }
        
        #formStatus {
          text-align: center;
          margin-top: 1rem;
          font-size: 0.875rem;
          opacity: 0;
          transition: opacity 0.5s ease;
        }
        
        #formStatus.visible {
          opacity: 1;
        }
        
        .blurred-container {
          background: rgba(255, 255, 255, 0.05);
          -webkit-backdrop-filter: blur(23px);
          backdrop-filter: blur(23px);
          border-radius: 20px;
          border: 1px solid rgba(255, 255, 255, 0.3);
          box-shadow: 
            0 8px 32px rgba(0, 0, 0, 0.1),
            inset 0 1px 0 rgba(255, 255, 255, 0.37),
            inset 0 -1px 0 rgba(255, 255, 255, 0.1),
            inset 0 0 14px 7px rgba(148, 148, 148, 0.247);
          position: relative;
          overflow: hidden;
          transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
          transform-origin: center;
          margin-top: 1.6rem;
          margin-bottom: 1.6rem;
        }
        
        .blurred-container::before {
          content: "";
          position: absolute;
          inset: 0;
          pointer-events: none;
          z-index: 5;
          opacity: 0.12 ; /* Adjust for desired grain strength */
          background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><filter id="noiseFilter"><feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="4" stitchTiles="stitch"/></filter><rect width="100" height="100" filter="url(%23noiseFilter)"/></svg>');
          background-repeat: repeat;
          background-size: 100px 100px;
          mix-blend-mode: overlay;
          border-radius: 20px;
        }
        
        .blurred-container::after {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 1px;
          height: 100%;
          background: linear-gradient(
            180deg,
            rgba(255, 255, 255, 0.507),
            transparent,
            rgba(255, 255, 255, 0.3)
          );
        }
        
        @media (max-width: 768px) {
          .blurred-container {
            background: transparent;
            -webkit-backdrop-filter: none;
            backdrop-filter: none;
            box-shadow: none;
            border: none;
          }
          .blurred-container::before {
            display: none;
          }
        }
        
        .blurred-container.hidden {
          opacity: 0;
          transform: translateY(-20px) scale(0.95) rotate(-1deg);
          pointer-events: none;
          filter: blur(5px);
        }
        
        .hide-view-btn, .mute-btn {
          position: fixed;
          right: 2rem;
          top: 1rem;
          background: rgba(255, 255, 255, 0.05);
          border: 1px solid rgba(255, 255, 255, 0.3);
          color: var(--text-color);
          width: 40px;
          height: 40px;
          border-radius: 20px;
          cursor: url(hand-pointer.svg) 9 9, pointer;
          transition: all 0.3s ease;
          z-index: 1000;
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 0;
          opacity: 0.3;
          backdrop-filter: blur(23px);
          -webkit-backdrop-filter: blur(23px);
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.37), inset 0 -1px 0 rgba(255, 255, 255, 0.1), inset 0 0 14px 7px rgba(148, 148, 148, 0.247);
        }
        
        .hide-view-btn {
          top: 1rem;
        }
        
        .mute-btn {
          top: 4rem;
        }
        
        @media (max-width: 768px) {
          .hide-view-btn, .mute-btn {
            right: 1rem;
          }
        }
        
        .hide-view-btn:hover {
          background: var(--hover-color);
          opacity: 1;
        }
        
        .mute-btn:hover {
          background: var(--hover-color);
          opacity: 1;
        }
        
        .hide-view-btn.active {
          opacity: 1;
          background: var(--hover-color);
        }
        
        .mute-btn.active {
          opacity: 1;
          background: var(--hover-color);
        }
        
        .hide-view-btn svg, .mute-btn svg {
          width: 24px;
          height: 24px;
          fill: currentColor;
        }
        .volume-slider-container {
          position: fixed;
          right: 1.95rem;
          top: 5.5rem;
          width: 40px;
          height: 0;
          overflow: hidden;
          z-index: 998; /* Lower than mute button's z-index */
          background: rgba(131, 130, 130, 0.3);
          border-radius: 0 0 20px 20px; /* Rounded bottom corners only */
          padding: 0;
          display: flex;
          align-items: center;
          justify-content: center;
          opacity: 0;
          visibility: hidden;
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          transform-origin: top center;
          transform: scaleY(0);
          border-top: none;
        }
        
        @media (max-width: 768px) {
          .volume-slider-container {
            display: none !important;
          }
        }
        
        .volume-slider-container.visible {
          height: 175px;
          opacity: 1;
          visibility: visible;
          padding: 10px 0;
          transform: scaleY(1);
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .volume-slider {
          -webkit-appearance: none;
          appearance: none;
          width: 120px;
          height: 4px;
          border-radius: 2px;
          position: relative;
          transform: rotate(-90deg);
          transform-origin: center;
          margin: 80px 0 60px; /* Adjusted margin to better position the slider */
          background: rgba(255, 255, 255, 0.2);
          outline: none;
          opacity: 1;
          transition: all 0.2s ease;
        }
        
        .volume-slider::-webkit-slider-thumb {
          -webkit-appearance: none;
          appearance: none;
          width: 24px;
          height: 24px;
          background: rgb(255, 145, 0);
          border-radius: 50%;
          cursor: url(hand-pointer.svg) 9 9, pointer;
          margin-top: -10px;
          transition: box-shadow 0.3s ease;
        }
        
        .volume-slider::-moz-range-thumb {
          width: 24px;
          height: 24px;
          background: #ff9100;
          border-radius: 50%;
          cursor: url(hand-pointer.svg) 9 9, pointer;
        }
        
        .volume-slider::-webkit-slider-runnable-track {
          width: 100%;
          height: 4px;
          background: rgba(255, 255, 255, 0.2);
          border-radius: 2px;
        }
        
        .volume-slider::-moz-range-track {
          width: 100%;
          height: 4px;
          background: rgba(255, 255, 255, 0.2);
          border-radius: 2px;
        }
        
        .volume-slider:focus {
          outline: none;
        }
        
        .volume-slider:hover::-webkit-slider-thumb {
          box-shadow: 0 0 0 4px rgba(255, 145, 0, 0.3);
          transition: box-shadow 0.3s ease;
        }
        
        .volume-slider:focus::-moz-range-thumb {
          box-shadow: 0 0 0 4px rgba(255, 145, 0, 0.3);
        }
        
        .now-playing {
          position: fixed;
          bottom: 2rem;
          left: 50%;
          transform: translateX(-50%);
          background-image:
            url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="300" height="300" viewBox="0 0 100 100"><filter id="noiseFilter"><feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="4" stitchTiles="stitch"/></filter><rect width="100" height="100" filter="url(%23noiseFilter)"/></svg>'),
            rgba(87, 85, 85, 0.3);
          background-blend-mode: overlay;
          background-repeat: repeat;
          background-size: 100px 100px;
          -webkit-backdrop-filter: blur(10px);
          backdrop-filter: blur(10px);
          border-radius: 20px;
          border: 1px solid rgba(255, 255, 255, 0.3);
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.37), inset 0 -1px 0 rgba(255, 255, 255, 0.1), inset 0 0 14px 7px rgba(148, 148, 148, 0.247);
          padding: 0.8rem 1.5rem;
          color: var(--text-color);
          font-size: 0.9rem;
          opacity: 0;
          visibility: hidden;
          transition: opacity 0.5s cubic-bezier(0.4,0,0.2,1), visibility 0.5s cubic-bezier(0.4,0,0.2,1);
          display: flex;
          align-items: center;
          gap: 0.8rem;
          z-index: 999;
          white-space: nowrap;
          text-align: center;
          overflow: hidden; /* ensure ::before stays inside */
        }
        
        .now-playing.visible {
          opacity: 1;
          visibility: visible;
        }
        
        .now-playing .music-icon {
          width: 16px;
          height: 16px;
          fill: currentColor;
        }
        
        .now-playing .title {
          font-weight: 400;
          letter-spacing: 0.05rem;
        }
        
        .now-playing .separator {
          margin: 0 0.5rem;
          opacity: 0.5;
        }
        
        ::selection {
          background: rgb(255, 145, 0, .5);
          color: #ffffff;
        }
        
        ::-moz-selection {
          background: #ff9100;
          color: #ffffff;
        }
        
        .embed-header {
          backdrop-filter: blur(23px);
          -webkit-backdrop-filter: blur(23px);
          border: 1px solid rgba(255, 255, 255, 0.3);
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.37), inset 0 -1px 0 rgba(255, 255, 255, 0.1), inset 0 0 14px 7px rgba(148, 148, 148, 0.247);
          cursor: url(move.svg) 9 9, move;
        }
        
        /* Grainy glass effect for all glassmorphism elements */
        .blurred-container,
        .expand-button,
        .link-item,
        .portfolio-item,
        .embed-close,
        .embed-open-new-tab {
          background-image:
            url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><filter id="noiseFilter"><feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="4" stitchTiles="stitch"/></filter><rect width="100" height="100" filter="url(%23noiseFilter)"/></svg>'),
            rgba(255,255,255,0.05);
          background-blend-mode: overlay;
          background-repeat: repeat;
          background-size: auto;
        }
        
        .mute-btn,
        .hide-view-btn {
          background-image:
            url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><filter id="noiseFilter"><feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="4" stitchTiles="stitch"/></filter><rect width="100" height="100" filter="url(%23noiseFilter)"/></svg>'),
            rgba(255,255,255,0.05);
          background-blend-mode: overlay;
          background-repeat: repeat;
          background-size: 100px 100px;
          -webkit-backdrop-filter: blur(23px);
          backdrop-filter: blur(23px);
          border-radius: 20px;
          border: 1px solid rgba(255, 255, 255, 0.3);
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.37), inset 0 -1px 0 rgba(255, 255, 255, 0.1), inset 0 0 14px 7px rgba(148, 148, 148, 0.247);
          opacity: 1;
        }
        
        .now-playing::before {
          content: "";
          position: absolute;
          inset: 0;
          pointer-events: none;
          z-index: 1;
          opacity: 0.12; /* Increase for stronger grain */
          background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><filter id="noiseFilter"><feTurbulence type="fractalNoise" baseFrequency="1.2" numOctaves="2" stitchTiles="stitch"/></filter><rect width="100" height="100" filter="url(%23noiseFilter)"/></svg>');
          background-repeat: repeat;
          background-size: 100px 100px;
          mix-blend-mode: overlay;
          border-radius: 20px;
        }
        .mute-btn::before {
          content: "";
          position: absolute;
          inset: 0;
          pointer-events: none;
          z-index: 1;
          opacity: 0.16; /* Increase for stronger grain */
          background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><filter id="noiseFilter"><feTurbulence type="fractalNoise" baseFrequency="1.2" numOctaves="2" stitchTiles="stitch"/></filter><rect width="100" height="100" filter="url(%23noiseFilter)"/></svg>');
          background-repeat: repeat;
          background-size: 100px 100px;
          mix-blend-mode: overlay;
          border-radius: 20px;
        }
        
        .hide-view-btn::before {
          content: "";
          position: absolute;
          inset: 0;
          pointer-events: none;
          z-index: 1;
          opacity: 0.16; /* Increase for stronger grain */
          background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><filter id="noiseFilter"><feTurbulence type="fractalNoise" baseFrequency="1.2" numOctaves="2" stitchTiles="stitch"/></filter><rect width="100" height="100" filter="url(%23noiseFilter)"/></svg>');
          background-repeat: repeat;
          background-size: 100px 100px;
          mix-blend-mode: overlay;
          border-radius: 20px;
        }
        
    </style>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
          // Hide view button
          const hideViewBtn = document.createElement('button');
          hideViewBtn.className = 'hide-view-btn';
          hideViewBtn.setAttribute('aria-label', 'Toggle content visibility');
          
          const eyeOpen = `<svg viewBox="0 0 24 24">
            <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
          </svg>`;
          
          const eyeClosed = `<svg viewBox="0 0 24 24">
            <path d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73l-9-9L4.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"/>
          </svg>`;
          
          hideViewBtn.innerHTML = eyeClosed;
          hideViewBtn.onclick = function() {
            const container = document.querySelector('.blurred-container');
            const vignetteOverlay = document.getElementById('vignette-overlay');
            
            if (container.classList.contains('hidden')) {
              // Show animation
              container.style.transform = 'translateY(20px) scale(0.95) rotate(1deg)';
              container.style.opacity = '0';
              container.style.filter = 'blur(5px)';
              vignetteOverlay.style.opacity = '0';
              
              setTimeout(() => {
                container.classList.remove('hidden');
                container.style.transform = '';
                container.style.opacity = '';
                container.style.filter = '';
                vignetteOverlay.style.opacity = '';
              }, 50);
              this.innerHTML = eyeClosed;
            } else {
              // Hide animation
              container.classList.add('hidden');
              vignetteOverlay.style.opacity = '0';
              this.innerHTML = eyeOpen;
            }
          };
          document.body.appendChild(hideViewBtn);
        
          // Mute button and volume slider
          const muteBtn = document.createElement('button');
          muteBtn.className = 'mute-btn';
          muteBtn.setAttribute('aria-label', 'Toggle audio mute');
          
          const volumeOn = `<svg viewBox="0 0 24 24">
            <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
          </svg>`;
          
          const volumeOff = `<svg viewBox="0 0 24 24">
            <path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>
          </svg>`;
        
          // Create volume slider container
          const volumeSliderContainer = document.createElement('div');
          volumeSliderContainer.className = 'volume-slider-container';
          
          // Create volume slider
          const volumeSlider = document.createElement('input');
          volumeSlider.type = 'range';
          volumeSlider.min = '0';
          volumeSlider.max = '100';
          volumeSlider.value = '10';
          volumeSlider.className = 'volume-slider';
          
          volumeSliderContainer.appendChild(volumeSlider);
          document.body.appendChild(volumeSliderContainer);
        
          // Single shared Howler instance for music (html5 true for mobile reliability)
          const music = new Howl({
            src: ['Let U Go.mp3?v=1'],
            loop: true,
            volume: 0.1,
            html5: true
          });
          
          muteBtn.innerHTML = volumeOff;
          muteBtn.onclick = function() {
            // On iOS/mobile, resume contexts on user gesture
            if (window.Howler && Howler.ctx && Howler.ctx.state === 'suspended') {
              Howler.ctx.resume();
            }
            if (window.__frubAudio && window.__frubAudio.audioContext && window.__frubAudio.audioContext.state === 'suspended') {
              window.__frubAudio.audioContext.resume();
            }

            if (!music.playing()) {
              music.play();

              // Hook up visualizer to this music element the first time
              if (window.__frubAudio && !window.__frubAudio._connected) {
                const { audioContext, analyser, visualizer } = window.__frubAudio;
                const mediaEl = music._sounds[0]?._node;
                if (mediaEl) {
                  // Create source only once
                  window.__frubAudio._connected = true;
                  try {
                    const src = audioContext.createMediaElementSource(mediaEl);
                    src.connect(analyser);
                    analyser.connect(audioContext.destination);
                    visualizer.connectAudio(analyser);
                  } catch (e) {
                    // In case of "a MediaElementSourceNode with this HTMLMediaElement already exists"
                  }
                }
              }

              this.innerHTML = volumeOn;
              volumeSliderContainer.classList.add('visible');
              nowPlaying.classList.add('visible');
            } else {
              music.pause();
              this.innerHTML = volumeOff;
              volumeSliderContainer.classList.remove('visible');
              nowPlaying.classList.remove('visible');
              // Reset volume slider to 10% when hiding
              volumeSlider.value = 10;
              music.volume(0.1);
            }
          };
        
          // Volume slider event listener
          volumeSlider.addEventListener('input', function() {
            const volume = this.value / 100;
            music.volume(volume);
            if (volume === 0) {
              muteBtn.innerHTML = volumeOff;
            } else {
              muteBtn.innerHTML = volumeOn;
            }
          });
          
          document.body.appendChild(muteBtn);
        
          // Create now playing display
          const nowPlaying = document.createElement('div');
          nowPlaying.className = 'now-playing';
          nowPlaying.innerHTML = `
            <svg class="music-icon" viewBox="0 0 24 24">
              <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/>
            </svg>
            <span class="title">Let U Go</span>
          `;
          document.body.appendChild(nowPlaying);
        
          // Add audio ended handler
          music.on('end', function() {
            muteBtn.innerHTML = volumeOff;
            volumeSliderContainer.classList.remove('visible');
            nowPlaying.classList.remove('visible');
          });

          // Autoplay hint: start silent on first interaction
          const primePlayback = () => {
            if (!music.playing()) {
              if (window.Howler && Howler.ctx && Howler.ctx.state === 'suspended') {
                Howler.ctx.resume();
              }
              if (window.__frubAudio && window.__frubAudio.audioContext && window.__frubAudio.audioContext.state === 'suspended') {
                window.__frubAudio.audioContext.resume();
              }
              music.volume(Math.max(0.0001, music.volume()));
              music.play();
              music.pause();
            }
            document.removeEventListener('touchstart', primePlayback);
            document.removeEventListener('click', primePlayback);
          };
          document.addEventListener('touchstart', primePlayback, { once: true });
          document.addEventListener('click', primePlayback, { once: true });
        });
        
        // Make embed window draggable
        const embedWindow = document.getElementById('embedWindow');
        const embedHeader = document.querySelector('.embed-header');
        
        let isDragging = false;
        let offsetX, offsetY;
        
        embedHeader.addEventListener('mousedown', (e) => {
          isDragging = true;
        
          // Store the current position relative to the viewport
          const rect = embedWindow.getBoundingClientRect();
        
          // Remove transform to avoid interference
          embedWindow.style.transform = 'none';
        
          // Set top/left to current visual position
          embedWindow.style.left = rect.left + 'px';
          embedWindow.style.top = rect.top + 'px';
        
          // Calculate offsets from mouse to element's top-left corner
          offsetX = e.clientX - rect.left;
          offsetY = e.clientY - rect.top;
        
          embedWindow.style.transition = 'none'; // Disable transition during drag
          embedWindow.style.cursor = 'grabbing';
        });
        
        document.addEventListener('mousemove', (e) => {
          if (!isDragging) return;
        
          // Update position based on mouse position and initial offset
          embedWindow.style.left = (e.clientX - offsetX) + 'px';
          embedWindow.style.top = (e.clientY - offsetY) + 'px';
        });
        
        document.addEventListener('mouseup', () => {
          isDragging = false;
          embedWindow.style.transition = ''; // Re-enable transition for smooth future movements (if any)
          embedWindow.style.cursor = 'auto';
        });
    </script>
